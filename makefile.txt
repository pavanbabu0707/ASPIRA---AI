    .PHONY: setup build_features fit_knn fit_kmeans ingest clean run

PY := .venv/Scripts/python
PIP := .venv/Scripts/pip

setup:
	python -m venv .venv
	$(PIP) install --upgrade pip
	$(PIP) install -e .

ingest:
	$(PY) src/ingest/dummy_check.py

build_features:
	$(PY) src/features/build_training_view.py

fit_knn:
	$(PY) src/models/fit_knn.py

fit_kmeans:
	$(PY) src/models/fit_kmeans.py

run:
	$(PY) -m uvicorn app.main:app --reload

clean:
	rm -rf dist build *.egg-info __pycache__ .pytest_cache
